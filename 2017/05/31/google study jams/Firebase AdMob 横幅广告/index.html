<!DOCTYPE html>
<html lang="zh">
    <head>
    <!-- 
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.0 -->

    <!-- Title -->
    
    <title>
        
            Android Firebase AdMob 横幅广告 | 
        
        BearZPY Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#FF4081">
    <meta name="author" content="BearZPY">
    <meta name="description" content="null">
    <meta name="keywords" content="null,Android,Google,AdMob,Firebase">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="BearZPY Blog">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://bearzpy.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Android Firebase AdMob 横幅广告 | BearZPY Blog">
    <meta property="og:description" content="null">
    <meta property="og:article:tag" content="Android"> <meta property="og:article:tag" content="Google"> <meta property="og:article:tag" content="AdMob"> <meta property="og:article:tag" content="Firebase"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #FF4081;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #3F51B5 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #3F51B5 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #3F51B5 !important;
  }

  .toTop {
    background: #FF4081 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #FF4081;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #FF4081;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #FF4081;
  }

  .post-toc a:hover {
    color: #FF4081;
    text-decoration: underline;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #C5CAE9;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>



    <script src="/js/jquery.min.js"></script>
    <script src="/js/queue.js"></script>

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    

    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Firebase"><span class="post-toc-number">1.</span> <span class="post-toc-text">Firebase</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#AdMob"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">AdMob</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#接入-AdMob-SDK"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">接入 AdMob SDK</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在-build-gradle-中添加依赖"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">在 build.gradle 中添加依赖</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在-manifest-中声明权限"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">在 manifest 中声明权限</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在-layout-文件中添加布局"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">在 layout 文件中添加布局</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在-activity-代码中添加加载代码"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">在 activity 代码中添加加载代码</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#广告单元-ID"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">广告单元 ID</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#测试广告单元-ID"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">测试广告单元 ID</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建自己的广告单元-ID"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">创建自己的广告单元 ID</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#添加广告监听器"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">添加广告监听器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#注"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">注</span></a></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').css('background-image', 'url(' + '/img/random/material-' + randomNum + '.png' + ')');
</script>

        
    
            <p class="article-headline-p">
                Android Firebase AdMob 横幅广告
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/user.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>BearZPY</strong>
        <span>5月 31, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
            <i class="material-icons" role="presentation">devices other</i>
            <span class="visuallyhidden">devices other</span>
        </button>
        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
            <li class="mdl-menu__item">在其它设备中阅读本文章</li>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAADkElEQVR42u3aS24cMQwFQN//0snWQOKeRz5pMkBKK2PQUEvVC5qfr1/Wt/WFAAcOHDhw4MCBAweOD+b4itdfNvr2+/TJ5x3+3Cc52+4uOHDgwIHjBseLUPR4yfyIz9deXuYH3PwuOHDgwIHjHsfzQZPgmsDlKPkvu7vgwIEDB45P43gRwB6TumTn6S84cODAgeP/4WhKkHkhEgcOHDhwfBrHNBwmxzoVjJtPdbFWigMHDhw46oGGz//7rfMdOHDgwIHjD47pyscL8t2SoJs/Ob4RDhw4cOA4ypEHqgSlbz5Nhxjyfxpw4MCBA8d7OJ43zYNo03bqhxWSnX8M4Thw4MCB4yjHLmV6/mUXsHeJYt52GtRKceDAgQNHzdGPrO0Sv/yqu0GHaMQBBw4cOHAc5UgOkadSu/ZSX5TMPxgOHDhw4HgnR/6aXcDLd562spoGGA4cOHDgOMuRHDS53u6ZfhwhT/wGbSccOHDgwFFzNJv2CV4OtBvFePEWHDhw4MBxjWM6mpDz5eF817hqPgkOHDhw4LjHkSdd1QBBPTaXFyKjoiEOHDhw4DjKkQSkXbEvf0vy9vwTJs0wHDhw4MBxjyNvOO3WrsiYf4Zm6AEHDhw4cNzj2A0uJNeeHno6rNC0tXDgwIEDx22O3RhBXuDLQfvgOkgRceDAgQPHUY7kQGdH6HK4JJTmyduPt8aBAwcOHEc5Bu2Z+Hp5qM4Rm+TtxT8HOHDgwIHjKEeShjVDbPlodf6uwyEfBw4cOHBc45gOZE+H55rmVj9+fSyjxYEDBw4cAUdTgOsTtnxcrykmDtpOOHDgwIGj5tiV53Y0N4YnqgE+HDhw4MBxlCNJ2/Kka3fV6dBb3naKnsGBAwcOHNc48hCVFOamfPl5ktA+SEdx4MCBA8fbOaaBcDoANx1xmH6MZQqHAwcOHDgOVcNOleemyd50DKIfZcCBAwcOHLc58rZQ8vpd8BtfJl7LFA4HDhw4cAw5pmsX0nqyZsxiUBzEgQMHDhw1xzRQ3QjS+UmmqV0SvHHgwIEDxw2OJEw2LZ/plXZNr2OBFgcOHDhwHOJoLpaE4bxZ1dCM21o4cODAgeMDOJIwOU3PpkzTcYflfAcOHDhw4Hg7R54KNu2oJtziwIEDB45/xZEnY00jKi/w7d6Yp384cODAgeMeRx6omtJe3tbahcwpBA4cOHDguMFh4cCBAwcOHDhw4MCB48PWb380Fd44VeXcAAAAAElFTkSuQmCC">
        </ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/AdMob/">AdMob</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Android/">Android</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Firebase/">Firebase</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Google/">Google</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Android Firebase AdMob 横幅广告&url=https://bearzpy.github.io//2017/05/31/google study jams/Firebase AdMob 横幅广告/index.html&via=BearZPY" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://bearzpy.github.io//2017/05/31/google study jams/Firebase AdMob 横幅广告/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://bearzpy.github.io//2017/05/31/google study jams/Firebase AdMob 横幅广告/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://bearzpy.github.io//2017/05/31/google study jams/Firebase AdMob 横幅广告/index.html&title=Android Firebase AdMob 横幅广告" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=BearZPY Blog&title=Android Firebase AdMob 横幅广告&summary=null&pics=https://bearzpy.github.io/img/favicon.png&url=https://bearzpy.github.io/2017/05/31/google study jams/Firebase AdMob 横幅广告/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h1 id="Firebase"><a href="#Firebase" class="headerlink" title="Firebase"></a>Firebase</h1><p>Firebase 是一个用于开发移动应用和 Web 应用的开发平台，自从被 Google 收购后融合了 Google 的云服务。Firebase 的初始产品是一个实时数据库，它提供了一个 API，允许开发人员在多个客户端之间存储和同步数据。随着时间的推移，它已经扩大了产品线，成为一个完整的应用程序开发套件。</p>
<h2 id="AdMob"><a href="#AdMob" class="headerlink" title="AdMob"></a>AdMob</h2><p>AdMob 覆盖 200 多个国家，是美国最大的移动广告平台。开发者可以直接使用 AdMob SDK 展示广告来获得收益，而无需与广告投放者沟通。</p>
<h2 id="接入-AdMob-SDK"><a href="#接入-AdMob-SDK" class="headerlink" title="接入 AdMob SDK"></a>接入 AdMob SDK</h2><p>这里主要介绍如何使用横幅式广告。横幅广告：基本广告格式，在设备屏幕的顶部和底部展示。  </p>
<p>使用 AdMob SDK 主要有 4 个步骤：</p>
<ul>
<li>在 build.gradle 中添加依赖。</li>
<li>在 manifest 中声明权限。</li>
<li>在 layout 文件中添加布局。</li>
<li>在 activity 代码中添加加载代码。</li>
</ul>
<p>横幅式广告效果：<br><img src="https://raw.githubusercontent.com/BearZPY/blog-img-repository/master/google_study_jams/L4/admob_banner.png" alt="横幅式广告"></p>
<h3 id="在-build-gradle-中添加依赖"><a href="#在-build-gradle-中添加依赖" class="headerlink" title="在 build.gradle 中添加依赖"></a>在 build.gradle 中添加依赖</h3><p>修改 Project 目录下的 build.gradle，在 buildscript 闭包里的 dependencies 闭包中增加 com.google.gms:google-services 的插件。</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span>

buildscript <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        classpath <span class="token string">'com.android.tools.build:gradle:2.3.2'</span>
        classpath <span class="token string">'com.google.gms:google-services:3.0.0'</span>

        <span class="token comment" spellcheck="true">// NOTE: Do not place your application dependencies here; they belong</span>
        <span class="token comment" spellcheck="true">// in the individual module build.gradle files</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

allprojects <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

task <span class="token function">clean</span><span class="token punctuation">(</span>type<span class="token operator">:</span> Delete<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    delete rootProject<span class="token punctuation">.</span>buildDir
<span class="token punctuation">}</span>
</code></pre>
<p>修改 Module 目录下的 build.gradle，声明 google-services 插件，并在 dependencies 闭包中增加 firebase-core 和 firebase-ads。</p>
<pre class=" language-java"><code class="language-java">apply plugin<span class="token operator">:</span> <span class="token string">'com.android.application'</span>
apply plugin<span class="token operator">:</span> <span class="token string">'com.google.gms.google-services'</span>

android <span class="token punctuation">{</span>
    compileSdkVersion <span class="token number">25</span>
    buildToolsVersion <span class="token string">"25.0.2"</span>
    defaultConfig <span class="token punctuation">{</span>
        minSdkVersion <span class="token number">15</span>
        targetSdkVersion <span class="token number">25</span>
    <span class="token punctuation">}</span>
    buildTypes <span class="token punctuation">{</span>
        release <span class="token punctuation">{</span>
            minifyEnabled <span class="token boolean">false</span>
            proguardFiles <span class="token function">getDefaultProguardFile</span><span class="token punctuation">(</span><span class="token string">'proguard-android.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'proguard-rules.pro'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
    compile <span class="token string">'com.android.support:appcompat-v7:25.3.1'</span>
    compile <span class="token string">'com.google.firebase:firebase-core:10.2.1'</span>
    compile <span class="token string">'com.google.firebase:firebase-ads:10.2.1'</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="在-manifest-中声明权限"><a href="#在-manifest-中声明权限" class="headerlink" title="在 manifest 中声明权限"></a>在 manifest 中声明权限</h3><p>使用 AdMob 的应用本身需要有访问网络的权限，所以需要在 manifest 中声明如下权限。</p>
<pre class=" language-java"><code class="language-java">    <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.permission.ACCESS_NETWORK_STATE"</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>uses<span class="token operator">-</span>permission android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.permission.INTERNET"</span><span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<h3 id="在-layout-文件中添加布局"><a href="#在-layout-文件中添加布局" class="headerlink" title="在 layout 文件中添加布局"></a>在 layout 文件中添加布局</h3><p>横幅式广告只需要在布局文件中添加一个 AdView 就可以了，其中使用了 ads，需要声明命名空间，在根布局中添加 <code>xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;</code>。在 AdView 中，系统要求提供 layout_width 和 layout_height，可以将这两项都设置为 wrap_content。  </p>
<p>ads 参数意义：  </p>
<ul>
<li>adSize=”BANNER” 设置为横幅式广告。  </li>
<li>adUnitId 该参数是在请求广告时 AdView 使用的广告单元 ID，是用来和你的账户绑定的，下文会讲述如何获得该 ID。</li>
</ul>
<p>AdView 布局：</p>
<pre class=" language-java"><code class="language-java">    <span class="token operator">&lt;</span>com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>ads<span class="token punctuation">.</span>AdView
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/adView"</span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"wrap_content"</span>
        android<span class="token operator">:</span>layout_centerHorizontal<span class="token operator">=</span><span class="token string">"true"</span>
        android<span class="token operator">:</span>layout_alignParentBottom<span class="token operator">=</span><span class="token string">"true"</span>
        ads<span class="token operator">:</span>adSize<span class="token operator">=</span><span class="token string">"BANNER"</span>
        ads<span class="token operator">:</span>adUnitId<span class="token operator">=</span><span class="token string">"@string/banner_ad_unit_id"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>ads<span class="token punctuation">.</span>AdView<span class="token operator">></span>
</code></pre>
<h3 id="在-activity-代码中添加加载代码"><a href="#在-activity-代码中添加加载代码" class="headerlink" title="在 activity 代码中添加加载代码"></a>在 activity 代码中添加加载代码</h3><ul>
<li>定义全局变量 <code>private AdView mAdView;</code></li>
<li>在 OnCreate 中添加如下代码就能完成广告的加载。</li>
</ul>
<pre class=" language-java"><code class="language-java">    mAdView <span class="token operator">=</span> <span class="token punctuation">(</span>AdView<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>adView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    AdRequest adRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdRequest<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mAdView<span class="token punctuation">.</span><span class="token function">loadAd</span><span class="token punctuation">(</span>adRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="广告单元-ID"><a href="#广告单元-ID" class="headerlink" title="广告单元 ID"></a>广告单元 ID</h2><p>广告单元 ID 是在应用中占有位置的唯一标识符，用于显示广告。如果应用具有两个 Activity（例如，分别显示一个横幅），则需要提供两个广告单元，每个广告单元均具有自己的 ID。AdMob 广告单元 ID 的格式为 ca-app-pub-XXXXXXXXXXXXXXXX/NNNNNNNNNN</p>
<p>若要使新应用显示广告，则需包括一个广告单元 ID。使用应用字符串资源文件（在 app/src/main/res/values/strings.xml 中）。</p>
<h3 id="测试广告单元-ID"><a href="#测试广告单元-ID" class="headerlink" title="测试广告单元 ID"></a>测试广告单元 ID</h3><p><code>&lt;string name=&quot;banner_ad_unit_id&quot;&gt;ca-app-pub-3940256099942544/6300978111&lt;/string&gt;</code></p>
<p>注意，以上提供的广告单元 ID 仅供测试使用。它允许应用检索示例横幅广告并确保实现正确无误。在开发和测试应用时，应始终使用测试广告。 点击自己的实时广告违反 AdMob 政策。在开发和测试期间，请使用测试广告。如果确实需要在发布前呈现直播广告，请避免点击它们。如果点击直播广告，AdMob 帐户可能被禁用。</p>
<h3 id="创建自己的广告单元-ID"><a href="#创建自己的广告单元-ID" class="headerlink" title="创建自己的广告单元 ID"></a>创建自己的广告单元 ID</h3><p>当前基于 AdMob 和 AdMob Beta 的版本，有两种不同的方法，具体参见<br><a href="https://support.google.com/admob/answer/7311346" target="_blank" rel="external">创建横幅广告单元</a>。</p>
<h2 id="添加广告监听器"><a href="#添加广告监听器" class="headerlink" title="添加广告监听器"></a>添加广告监听器</h2><p>你可能会发现有时候你的广告不能正常显示出来，然而根据前文的信息你无法得知具体的原因，这时候我们可为 AdView 添加 AdListener，由此来确定 AdView 的状态。例如，当广告加载失败的时候 onAdFailedToLoad(int returnCode) 函数会被调用，我们可以根据 returnCode 来确定无法显示的原因。</p>
<p>AdListener 一共有 5 个函数可以由我们去实现：</p>
<ul>
<li>onAdClosed() 用户在点击广告后即将返回应用程序时调用。</li>
<li>onAdFailedToLoad(int returnCode) 广告请求失败时调用。</li>
<li>onAdLeftApplication() 当广告离开应用程序时调用（例如，去浏览器）。</li>
<li>onAdLoaded() 从服务器获得广告后调用。</li>
<li>onAdOpened() 当广告打开，覆盖屏幕时调用。</li>
</ul>
<p>广告加载失败的 4 种常见原因：</p>
<ul>
<li>ERROR_CODE_INTERNAL_ERROR，值为0，内部错误（从广告服务器收到无效的响应）。</li>
<li>ERROR_CODE_INVALID_REQUEST，值为1，广告单元ID不正确。</li>
<li>ERROR_CODE_NETWORK_ERROR，值为2，网络连接失败。</li>
<li>ERROR_CODE_NO_FILL，值为3，广告请求已成功，但由于缺少广告资源，没有返回任何广告。</li>
</ul>
<p>使用示例：</p>
<pre class=" language-java"><code class="language-java">   mAdView <span class="token operator">=</span> <span class="token punctuation">(</span>AdView<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>adView<span class="token punctuation">)</span><span class="token punctuation">;</span>
   AdRequest adRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AdRequest<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   mAdView<span class="token punctuation">.</span><span class="token function">setAdListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AdListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token annotation punctuation">@Override</span>
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAdClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAdClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"onAdClosed: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token annotation punctuation">@Override</span>
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAdFailedToLoad</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAdFailedToLoad</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
           String msg<span class="token punctuation">;</span>
           <span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">case</span> AdRequest<span class="token punctuation">.</span>ERROR_CODE_INTERNAL_ERROR<span class="token operator">:</span>
                   msg <span class="token operator">=</span> <span class="token string">"服务器错误"</span><span class="token punctuation">;</span>
                   <span class="token keyword">break</span><span class="token punctuation">;</span>
               <span class="token keyword">case</span> AdRequest<span class="token punctuation">.</span>ERROR_CODE_INVALID_REQUEST<span class="token operator">:</span>
                   msg <span class="token operator">=</span> <span class="token string">"广告单元ID不正确"</span><span class="token punctuation">;</span>
                   <span class="token keyword">break</span><span class="token punctuation">;</span>
               <span class="token keyword">case</span> AdRequest<span class="token punctuation">.</span>ERROR_CODE_NETWORK_ERROR<span class="token operator">:</span>
                   msg <span class="token operator">=</span> <span class="token string">"网络连接失败"</span><span class="token punctuation">;</span>
                   <span class="token keyword">break</span><span class="token punctuation">;</span>
               <span class="token keyword">case</span> AdRequest<span class="token punctuation">.</span>ERROR_CODE_NO_FILL<span class="token operator">:</span>
                   msg <span class="token operator">=</span> <span class="token string">"暂无广告显示"</span><span class="token punctuation">;</span>
                   <span class="token keyword">break</span><span class="token punctuation">;</span>
               <span class="token keyword">default</span><span class="token operator">:</span>
                   msg <span class="token operator">=</span> <span class="token string">"未知错误"</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>msg<span class="token punctuation">,</span>Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"onAdFailedToLoad: msg = "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token annotation punctuation">@Override</span>
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAdLeftApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAdLeftApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"onAdLeftApplication: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token annotation punctuation">@Override</span>
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAdOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAdOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"onAdOpened: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>

       <span class="token annotation punctuation">@Override</span>
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAdLoaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAdLoaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">"onAdLoaded: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   mAdView<span class="token punctuation">.</span><span class="token function">loadAd</span><span class="token punctuation">(</span>adRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><p>有些时候广告可能显示不出来，可能是因为 GFW 导致的网络问题。</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    




                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/06/22/git/常用 git 指令/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/04/22/Android View/自定义 View 绘制基础/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/user.jpg" alt="BearZPY's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        965006619@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">九月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/categories/Gradle/">Gradle<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/Python/">Python<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/git/">git<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">cloud</i>
                
                标签
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/BearZPY" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;BearZPY Blog
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->
<script src="/js/lazyload.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
