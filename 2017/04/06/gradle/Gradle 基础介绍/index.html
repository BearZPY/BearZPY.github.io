<!DOCTYPE html>
<html lang="zh">
    <head>
    <!-- 
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.0 -->

    <!-- Title -->
    
    <title>
        
            Gradle 基础介绍 | 
        
        BearZPY Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#FF4081">
    <meta name="author" content="BearZPY">
    <meta name="description" content="null">
    <meta name="keywords" content="null,Android,Gradle">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="BearZPY Blog">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://bearzpy.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Gradle 基础介绍 | BearZPY Blog">
    <meta property="og:description" content="null">
    <meta property="og:article:tag" content="Android"> <meta property="og:article:tag" content="Gradle"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #FF4081;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #3F51B5 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #3F51B5 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #3F51B5 !important;
  }

  .toTop {
    background: #FF4081 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #FF4081;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #FF4081;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #FF4081;
  }

  .post-toc a:hover {
    color: #FF4081;
    text-decoration: underline;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #C5CAE9;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>



    <script src="/js/jquery.min.js"></script>
    <script src="/js/queue.js"></script>

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    

    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Gradle"><span class="post-toc-number">1.</span> <span class="post-toc-text">Gradle</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Gradle-背景知识"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Gradle 背景知识</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Gradle-文件结构"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Gradle 文件结构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Gradle-Wrapper"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">Gradle Wrapper</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#build-gradle"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">build.gradle</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Android-Studio-里的-Gradle"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">Android Studio 里的 Gradle</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#工程目录"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">工程目录</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#项目构建脚本"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">项目构建脚本</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#模块目录"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">模块目录</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#模块构建脚本"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">模块构建脚本</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#依赖库管理"><span class="post-toc-number">1.3.5.</span> <span class="post-toc-text">依赖库管理</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#编译不同的-app-版本"><span class="post-toc-number">1.3.6.</span> <span class="post-toc-text">编译不同的 app 版本</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Gradle-是怎么工作的"><span class="post-toc-number">1.3.7.</span> <span class="post-toc-text">Gradle 是怎么工作的</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#小结"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">小结</span></a></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').css('background-image', 'url(' + '/img/random/material-' + randomNum + '.png' + ')');
</script>

        
    
            <p class="article-headline-p">
                Gradle 基础介绍
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/user.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>BearZPY</strong>
        <span>4月 06, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
            <i class="material-icons" role="presentation">devices other</i>
            <span class="visuallyhidden">devices other</span>
        </button>
        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
            <li class="mdl-menu__item">在其它设备中阅读本文章</li>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAAC4UlEQVR42u3aQU7DQAwF0N7/0rBFAibfdoAw87KqqqT1y8aab7/ejrxe2NjY2NjY2NjY2I9kv+Lr81Pf/U7y/Rdlfbhn/VSzZmxsbOyt2XlB60LXxSXPrp+a1IyNjY19Avu7v1zfkzSPdXHr+6v1YGNjY2PnfzMpK0HmzQ8bGxsb+y52/gv55zx+wsbGxsbO/yYvNA/681HBH2Rp2NjY2I9n5yHRcz7/6nwbGxsb+8Hs6pWv0dz1fT5suKgcGxsbe1N2NR7KDwzVY8N8hHARRWFjY2Mfw642quSl5EeLQkhUfNHY2NjYu7LXPzThJcs9+eB2chzCxsbGPoedh0rRikzwOpIly16ohI2NjX0OuzpMrbaT/Ndexava/LCxsbH3ZudNYrLWk8dD+VOjBoaNjY29KXsdA+Wxfq/0aosqRFfY2NjYm7LzUL43GMjbzF2rmYVBLzY2NvYW7J+IjSaHh/mLw8bGxj6NPY/471qpzD/na53Y2NjYp7HzpcZ84TJpXZOxRKFCbGxs7GPYzcjmx1pRvpRTGPRiY2Njb8pOGltyCLmrBVbHuhc1YGNjYx/Abq7CtDDJL1Rf68VhBhsbG3tT9iRI6rW6/IiSjx+SIxM2Njb2ruz5oLcXBjUj/mJDxcbGxj6H3aPmo9mL1lJc9MmrxcbGxj6BXWgA8aElf33r2Kh6gBmFStjY2NhbsJMDyTwYyhvVZFRQaGDY2NjY27GrBa2DpOo4Ibm/eTTCxsbGPoydNLDqUaQ3Wu4tZWJjY2Ofw65evXFsdTTbi7QKDQwbGxt7I/akMeTg6kC3NxgoD3qxsbGxN2InTWvdbCbx0CRyKiwGYWNjYx/A7sVDeXhUHRjnLTZqitjY2NjYgxInh5/qyuYvNTBsbGzsf87OxwPV4qrtrTCEwMbGxj6AnfxxFMS3FnSSECp/cdjY2NinsW8LbuL7q2Pg3somNjY29gnscy5sbGxsbGxsbGzsx1zvWbdJS83fa6cAAAAASUVORK5CYII=">
        </ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Android/">Android</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/Gradle/">Gradle</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Gradle 基础介绍&url=https://bearzpy.github.io//2017/04/06/gradle/Gradle 基础介绍/index.html&via=BearZPY" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://bearzpy.github.io//2017/04/06/gradle/Gradle 基础介绍/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://bearzpy.github.io//2017/04/06/gradle/Gradle 基础介绍/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://bearzpy.github.io//2017/04/06/gradle/Gradle 基础介绍/index.html&title=Gradle 基础介绍" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=BearZPY Blog&title=Gradle 基础介绍&summary=null&pics=https://bearzpy.github.io/img/favicon.png&url=https://bearzpy.github.io/2017/04/06/gradle/Gradle 基础介绍/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><p>本篇文章主要讲述 Gradle 的基本知识点，帮助大家了解 Gradle。</p>
<h3 id="Gradle-背景知识"><a href="#Gradle-背景知识" class="headerlink" title="Gradle 背景知识"></a>Gradle 背景知识</h3><p>先介绍概念：</p>
<blockquote>
<p>Gradle 是一个基于 Apache Ant 和 Apache Maven 概念的项目自动化建构工具。它使用一种基于 Groovy 的特定领域语言来声明项目设置，而不是传统的 XML 。</p>
</blockquote>
<p>这个概念我们先不用去理解，只要知道 Gradle 是一个自动化构建工具就可以了。那么为什么我们在开发 Android 程序的时候需要去使用自动化构建工具呢？答案很简单，就是构建一个 Android 工程需要做很多重复性很高的事情，手动干这些事麻烦又浪费时间，所以我们选择让机器去做。好吧，我承认就是懒，聪明的开发者都愿意找一个正确，高效又能偷懒的方法。</p>
<p>Gradle 是 Google I/O 2013 大会上发布的，用来替换 Ant 和 Maven 的新工具，替换旧工具的原因当然是它们不能让开发者继续开心的懒下去了。</p>
<p>简单讲一下 Ant，Maven 和 Gradle 的关系，这是个题外话。Ant 可以自动化打包，但是许多东西要手动下载添加。Maven 既可以自动化打包，也能帮下载你需要的东西，但是它的逻辑策略写起来很麻烦。两个工具都不大好用，为了能开心的偷懒，Gradle 应运而生。Gradle 集成了上面的功能，非常方别开发使用，但由于某些网络问题，导致初学者使用起来体验并不好。</p>
<h3 id="Gradle-文件结构"><a href="#Gradle-文件结构" class="headerlink" title="Gradle 文件结构"></a>Gradle 文件结构</h3><p>Android Studio 创建 Android 工程的时候会创建许多文件，这让不熟悉的人分不清楚不同文件的意义，这里我们先介绍一个最简单的 Gradle 结构，如下图。</p>
<p><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/gradle_mimi_unit.png" alt="gradle_mimi_unit"></p>
<p>这个结构一共有 5 个文件。其中 build.gradle 是我们需要编写的 Gradle 的脚本文件，另外四个文件组成了一个 Gradle 中的重要结构：Gradle Wrapper（Gradle 封装器）。</p>
<h4 id="Gradle-Wrapper"><a href="#Gradle-Wrapper" class="headerlink" title="Gradle Wrapper"></a>Gradle Wrapper</h4><p>不同的开发者可能使用不同版本的 Gradle 来构建 Android 项目，多人开发的时候使用不同版本的构建工具，可能出现莫名其妙的问题。大家也都遇到过某个软件在这个电脑上没问题，在另外的电脑上有问题的情况吧。Gradle 封装器就是用来解决这个问题的，每一个封装器都绑定了一个特定版本的 Gradle，当你运行 Gradle 命令的时候，它会先下载相应的 Gradle 版本，并使用这个版本来执行构建，这样就避免了环境不统一的问题。这是个很棒的功能，但由于某些网络问题，下载会超时，导致了很多新手都栽在了这里。这里就不讲述怎么下 Gradle 了，网上很多这方面的资料。</p>
<p>为了完整起见，不要删除 Gradle 封装器里的文件或改变目录结构，这里介绍一下封装器里文件的功能</p>
<ul>
<li>gradlew （Unix Shell 脚本）</li>
<li>gradlew.bat （Windows 批处理文件）</li>
<li>gradle/wrapper/gradle-wrapper.jar （Jar 包）</li>
<li>gradle/wrapper/gradle-wrapper.properties （封装器属性）  </li>
</ul>
<p>Gradle 版本会被下载到用户目录下的 .gradle/wrapper/dists 中。<br>查看 gradle-wrapper.properties 文件可以看到当前封装器使用的 gradle 版本号。  </p>
<p><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/gradle_wrapper_properties.png" alt="gradle_wrapper_properties"></p>
<p>Unix Shell 环境下使用 gradlew 命令<br><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/unix_shell.png" alt="unix_shell"></p>
<p>Windows 环境下使用 gradlew.bat  命令<br><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/windows_cmd.png" alt="windows_cmd"></p>
<h4 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h4><p>build.gradle 是构建所需要的脚本文件，这里给一个最简单的示例。</p>
<p>新建了一个名为 hello 的任务，输出 Hello World。</p>
<pre class=" language-java"><code class="language-java">task hello <span class="token punctuation">{</span>
    println <span class="token string">"Hello World!"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>执行 gradlew.bat hello 就能看见 Hello World 输出在控制台上了。</p>
<p><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/task_hello.png" alt="task_hello"></p>
<h3 id="Android-Studio-里的-Gradle"><a href="#Android-Studio-里的-Gradle" class="headerlink" title="Android Studio 里的 Gradle"></a>Android Studio 里的 Gradle</h3><p>这里新建一个空的工程，来介绍 Gradle 的作用。</p>
<h4 id="工程目录"><a href="#工程目录" class="headerlink" title="工程目录"></a>工程目录</h4><p>Android Studio 是按项目建立的，项目里面可以有不同的 app 模块，简单的说一个项目可以编出几个不同的 app 软件。</p>
<p>项目目录界面如下<br><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/android_project.png" alt="android_project"></p>
<p>下面介绍目录中 build.gradle 和 Gradle 封装器之外的部分。</p>
<ul>
<li>.gradle 文件夹下放的是 Gradle 构建时的记录信息，无需关心</li>
<li>.idea 是 Android Studio 工程记录信息，无需关心</li>
<li>app 存放对于的模块文件，这里就是我们开发的app</li>
<li>build 存放的是 Gradle 在构建项目的时候生产的文件</li>
<li>.gitignore 是版本控制忽略文件，和 Gradle 无关</li>
<li>MyApplication.iml 生成文件，无需关心</li>
<li>local.properties 存放的 SDK，NDK 在本机上的目录</li>
<li>gradle.properties 存放的是整个项目 Gradle 的配置文件</li>
<li>settings.gradle 存放的是这个项目包括那些模块，当前只包括一个 app 模块</li>
</ul>
<h4 id="项目构建脚本"><a href="#项目构建脚本" class="headerlink" title="项目构建脚本"></a>项目构建脚本</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span>

buildscript <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 配置构建脚本</span>
    repositories <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 添加远程依赖库</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// JCenter 仓库</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// 配置构建依赖插件</span>
        <span class="token comment" spellcheck="true">// 声明了一个 构建 Android 的 Gradle 插件</span>
        <span class="token comment" spellcheck="true">// Gradle 本身是构建不了 Android 的</span>
        classpath <span class="token string">'com.android.tools.build:gradle:2.2.3'</span> 

        <span class="token comment" spellcheck="true">// NOTE: Do not place your application dependencies here; they belong</span>
        <span class="token comment" spellcheck="true">// in the individual module build.gradle files</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

allprojects <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// 配置整个项目</span>
    <span class="token comment" spellcheck="true">// Android 开发经常需要用一些支持库，这些支持库都有专门的网路存放地，供开发中下载</span>
    repositories <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// 添加远程依赖库 </span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// JCenter 仓库 </span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

task <span class="token function">clean</span><span class="token punctuation">(</span>type<span class="token operator">:</span> Delete<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// clean 任务清理构建生成的文件</span>
    delete rootProject<span class="token punctuation">.</span>buildDir  <span class="token comment" spellcheck="true">// 删除 build 文件夹</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="模块目录"><a href="#模块目录" class="headerlink" title="模块目录"></a>模块目录</h4><p><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/android_module.png" alt="android_module"></p>
<ul>
<li>build 存放着编译生成的文件</li>
<li>libs 放的是模块编译需要使用的库文件</li>
<li>src 放着源码和资源文件</li>
<li>.gitignore 是版本控制忽略文件，和 Gradle 无关</li>
<li>app.iml 生成文件，无需关心</li>
<li>build.gradle 是模块构建脚本</li>
<li>proguard-rules.pro 是模块混淆规则，防止 app 被破解的</li>
</ul>
<h4 id="模块构建脚本"><a href="#模块构建脚本" class="headerlink" title="模块构建脚本"></a>模块构建脚本</h4><pre class=" language-java"><code class="language-java">apply plugin<span class="token operator">:</span> <span class="token string">'com.android.application'</span>  <span class="token comment" spellcheck="true">// 标明这个脚本是编译 android 应用程序用的</span>

android <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 编译 apk 文件配置</span>
    compileSdkVersion <span class="token number">25</span>  <span class="token comment" spellcheck="true">// SDK 版本号 API 25</span>
    buildToolsVersion <span class="token string">"25.0.2"</span> <span class="token comment" spellcheck="true">// 使用的编译工具的版本号</span>
    defaultConfig <span class="token punctuation">{</span>
        applicationId <span class="token string">"com.io.bearzpy.myapplication"</span> <span class="token comment" spellcheck="true">// 表明 APP 在系统中的唯一 ID</span>
        minSdkVersion <span class="token number">19</span>  <span class="token comment" spellcheck="true">// 兼顾最老的系统版本</span>
        targetSdkVersion <span class="token number">25</span> <span class="token comment" spellcheck="true">// 经过充分测试的版本</span>
        versionCode <span class="token number">1</span>  <span class="token comment" spellcheck="true">// 代码版本给系统实际区分不同版本</span>
        versionName <span class="token string">"1.0"</span> <span class="token comment" spellcheck="true">// 版本名字给人区分不同版本</span>
        <span class="token comment" spellcheck="true">// 使用单元测试框架</span>
        testInstrumentationRunner <span class="token string">"android.support.test.runner.AndroidJUnitRunner"</span>
    <span class="token punctuation">}</span>
    buildTypes <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// 构建变量</span>
        release <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// 发布版本</span>
            <span class="token comment" spellcheck="true">// 这一部分是防止应用被人破解的</span>
            minifyEnabled <span class="token boolean">false</span> <span class="token comment" spellcheck="true">// 控制是否运行混淆的</span>
            <span class="token comment" spellcheck="true">// 混淆规则设置</span>
            proguardFiles <span class="token function">getDefaultProguardFile</span><span class="token punctuation">(</span><span class="token string">'proguard-android.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'proguard-rules.pro'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// 添加依赖</span>
    <span class="token comment" spellcheck="true">// 导入 libs 文件夹下所有的 jar 包</span>
    compile <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token operator">:</span> <span class="token string">'libs'</span><span class="token punctuation">,</span> include<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'*.jar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// 测试应用接口的依赖</span>
    <span class="token function">androidTestCompile</span><span class="token punctuation">(</span><span class="token string">'com.android.support.test.espresso:espresso-core:2.2.2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        exclude group<span class="token operator">:</span> <span class="token string">'com.android.support'</span><span class="token punctuation">,</span> module<span class="token operator">:</span> <span class="token string">'support-annotations'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">// 兼容低版本系统的依赖</span>
    compile <span class="token string">'com.android.support:appcompat-v7:25.2.0'</span>
    <span class="token comment" spellcheck="true">// 单元测试的依赖</span>
    testCompile <span class="token string">'junit:junit:4.12'</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="依赖库管理"><a href="#依赖库管理" class="headerlink" title="依赖库管理"></a>依赖库管理</h4><p>开发者经常会使用一些已有的现成的，可以直接拿来用的解决方案，这极大的提高了开发效率，也着实让他们能够偷懒了，但是这也造成了一些问题。比如当你同时使用这个两个方案解决不同的事情，这两个方案共用了同一个依赖库，但是却使用了不同的版本，这会为我们的程序带来意外的问题。Gradle 拥有解决依赖冲突的能力，它可以自动下载使用合适的版本，尽量帮开发者解决依赖库冲突问题，如果它解决不了，也会报个错给你。</p>
<h4 id="编译不同的-app-版本"><a href="#编译不同的-app-版本" class="headerlink" title="编译不同的 app 版本"></a>编译不同的 app 版本</h4><p>实际开发中，开发者往往要准备好几个版本，比如调试版本，发布版本，不同手机厂商使用的版本，都考开发者手动准备也是很费力且容易出错的。Gradle 也提供了构建多版本的功能。例如，模块构建脚本中的构建变量增加了 release 版本，我们可以在 Android Studio 的 Build Variants 里面选则 release 版本，再次编译生成的就是 release 版本了。同理，我们也可以在构建脚本中添加其他的版本，比如付费版本和免费版本等等。</p>
<p><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/release.png" alt="release"></p>
<h4 id="Gradle-是怎么工作的"><a href="#Gradle-是怎么工作的" class="headerlink" title="Gradle 是怎么工作的"></a>Gradle 是怎么工作的</h4><p>每一个 Gradle 需要完成的工作都是一个任务，这些任务之间有着先后顺序，相互依赖的关系，而 Android 应用程序的构建需要许多这样的任务。Android Studio 有 Gradle 的控制面板可以查看当前项目有哪些任务。</p>
<p>这是一个空的项目所拥有的任务，可以看到项目本身有相当多的任务，对应的模块还有相当多的任务。<br><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/gradle_contol.png" alt="gradle_contol"></p>
<p>选择一个任务双击可以运行，这里以 build 为例，Run 面板中可以看到所有被执行的任务：<br><img src="https://github.com/BearZPY/blog-img-repository/raw/master/gradle/build_task.png" alt="build_task"></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>每当我们修改完程序之后都需要进行编译，然而编译需要这么多的步骤，如果每次都要手动去进行编译，即使能保证人工不出错，所耗费的时间也相当的大，所以有了自动化构建工具。我们在 Android Studio 中点一个 Run 就能完成的工作，实际上由自动化构建工具帮我们处理很多重复的劳动。而当旧的自动化构建工具不能满足我们的需求时，必然会有开发者去更新自动化构建工具，这也是 Android Studio 和 Gradle 成为 Android 开发使用的主流工具的原因。</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    




                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/05/12/google study jams/Android入门-L2 应用交互/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/03/27/google study jams/Android入门-1C 生日贺卡应用 /" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/user.jpg" alt="BearZPY's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        965006619@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">8</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/categories/Gradle/">Gradle<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/Python/">Python<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/git/">git<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">cloud</i>
                
                标签
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/BearZPY" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;BearZPY Blog
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->
<script src="/js/lazyload.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
